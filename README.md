# Rate-limiters

![Rate Limiter CI](https://github.com/SreenathKarthick11/Rate-limiters/actions/workflows/rate-limiter.yml/badge.svg)

A **production-oriented collection of rate limiting algorithms** implemented using **Redis + Lua** with Python bindings.
This repository focuses on **correctness, atomicity, and real-world behavior** under concurrent traffic, with automated CI-based benchmarking and visualization.

## Key Features

* Multiple **industry-standard rate limiting algorithms**
* **Redis Lua scripts** for atomic operations
* Python client wrappers for easy integration
* **Retry-After support** where applicable
* **CI-generated comparison plots** under identical traffic
* Clean separation between algorithms, scripts, and benchmarks

---

## Pipeline 

![Pipeline](docs/ratelimiter_pipeline.png)

## Rate Limiter Comparison

The following graph is automatically generated by CI and shows how
different rate limiting algorithms behave under identical traffic.

![Rate Limiter Comparison](ci/plots/rate_limit_comparison.png)

---

## Implemented Algorithms

| Algorithm                  | Description                                               | Pros                         | Cons                   | Use Case                  |
| -------------------------- | --------------------------------------------------------- | ---------------------------- | ---------------------- | ------------------------- |
| **Token Bucket**           | Tokens are added at a fixed rate and consumed per request | Allows bursts, smooth refill | Slightly complex state | APIs with burst tolerance |
| **Leaky Bucket**           | Requests are processed at a constant rate                 | Smooth output                | No burst handling      | Traffic shaping           |
| **Fixed Window Counter**   | Counts requests per fixed time window                     | Simple, memory efficient     | Boundary burst problem | Low-traffic systems       |
| **Sliding Window Log**     | Stores timestamps of each request                         | Precise                      | High memory usage      | Strict rate enforcement   |
| **Sliding Window Counter** | Hybrid of fixed window + sliding log                      | Smooth, memory efficient     | Approximation          | Most production APIs      |

---

## Algorithms Documentations

- [Token Bucket Doc](docs/token_bucket.md)
- [Leaky Bucket Doc](docs/leaky_bucket.md)
- [Fixed Window Counter Doc](docs/fixed_window_counter.md)
- [Sliding Window Log Doc](docs/sliding_window_log.md)
- [Sliding Window Counter Doc](docs/sliding_window_counter.md)


## Project Structure

```
Rate-limiters/
├── algorithms/
│   ├── token_bucket.py
│   ├── leaky_bucket.py
│   ├── fixed_window_counter.py
│   ├── sliding_window_log.py
│   └── sliding_window_counter.py
│
├── lua/
│   ├── token_bucket.lua
│   ├── leaky_bucket.lua
│   ├── fixed_window_counter.lua
│   ├── sliding_window_log.lua
│   └── sliding_window_counter.lua
│
├── redis_client/
│   ├── client.py
│   └── lua_loader.py
│
├── docs/
│   ├── token_bucket.md
│   ├── leaky_bucket.md
│   ├── fixed_window_counter.md
│   ├── sliding_window_log.md
│   └── sliding_window_counter.md
│
├── ci/
│   ├── benchmarks/
│   └── plots/
│       └── rate_limit_comparison.png
│
├── tests/
│   └── test_rate_limiters.py
│
├── .github/workflows/
│   └── rate-limiter.yml
│
├── README.md
└── requirements.txt
```

---

## Directory Breakdown

### `algorithms/`

Python interfaces for each rate limiting strategy.
These call Redis Lua scripts and return structured results (`allowed`, `remaining`, `retry_after`).

### `lua/`

Redis Lua scripts implementing the **core logic**.
All scripts are:

* Atomic
* Deterministic
* Safe under concurrency

### `redis_client/`

Shared Redis utilities:

* Script loading & caching
* Lua execution helpers
* Consistent return parsing

### `docs/`

Deep-dive documentation for each algorithm:

* Theory
* Edge cases
* Trade-offs
* Redis implementation details

### `ci/`

Automated benchmarking:

* Simulates identical traffic
* Collects metrics
* Generates plots during CI

### `tests/`

Unit and integration tests validating:

* Correct rate limiting
* Edge cases
* Retry-After correctness

---

## Requirements

* Python 3.10+
* Redis 6+
* Lua scripting enabled in Redis

---


